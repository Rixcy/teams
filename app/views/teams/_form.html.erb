<%= content_tag :div,
  id: "team-form",
  data: {
    team: team.to_json(except: [:created_at, :updated_at]),
    players_attributes: team.players.to_json(
      except: [:team_id,:created_at,:updated_at]
    ),
  } do %>

  <label>Team Name</label>
  <input type="text" v-model="team.name">

  <h4>Players</h4>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th class="has-text-left">Name</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr
        v-for="(player, index) in team.players_attributes"
        v-bind:class="{ 'disabled-row': player._destroy == '1' }" >
        <td v-cloak>
          {{ player.id }}
          <div v-if="player._destroy == '1'">
            - Will be removed
            <button v-on:click.prevent="undoRemove(index)">undo</button>
          </div>
        </td>
        <td><input type="text" v-model="player.name"></td>
        <td>
          <button
            v-on:click="removePlayer(index)"
            v-bind:disabled="player._destroy == '1'">
            Remove
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <button v-on:click.prevent="addPlayer">New player</button>

  <button v-on:click.prevent="saveTeam">Save team</button>

  <% console if Rails.env == 'development' %>
<% end %>
